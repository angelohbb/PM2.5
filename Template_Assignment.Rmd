---
title: "PM2.5 East and West Europe"
author: "Studentnames and studentnumbers here"
date: "`r Sys.Date()`"
output: pdf_document
---

# Set-up your environment

```{r package_install, include=FALSE}
#install.packages("tidyverse")
#install.packages("yaml")
#install.packages("rmarkdown")
```

```{r packages}
require(tidyverse)
require(rmarkdown)
require(yaml)
```

# Title Page

Jusab Aziz, Angelo Habib, Abba Ayad

Include the tutorial group number

Include your tutorial lecturer's name

# Part 1 - Identify a Social Problem

Use APA referencing throughout your document. [Here's a link to some explanation.](https://www.mendeley.com/guides/apa-citation-guide/)

## 1.1 Describe the Social Problem

Air pollution is a serious environmental and public health issue in Europe. One of the most harmful pollutants is PM2.5—fine particulate matter smaller than 2.5 micrometers. These particles can enter deep into the lungs and bloodstream, increasing the risk of asthma, heart disease, stroke, and premature death (WHO, 2021).

In our project, we focus on comparing Eastern and Western Europe to see if there are major differences in both PM2.5 pollution levels and the mortality rates caused by long-term exposure. This comparison is relevant because the two regions differ in industrialization, environmental policies, and healthcare systems—all of which can influence air quality and health outcomes.

We used two datasets: one showing average PM2.5 levels across countries, and one reporting death rates related to PM2.5 exposure. Our aim is to understand how air pollution affects public health in different parts of Europe and where improvements are most needed.

# Part 2 - Data Sourcing

## 2.1 Load in the data

Preferably from a URL, but if not, make sure to download the data and store it in a shared location that you can load the data in from. Do not store the data in a folder you include in the Github repository!

```{r loading_data, include=FALSE}
library(dplyr)

# Define the base path
base_path <- "~/Documents/GitHub/PM2.5/data/east europe data/"

# Helper function to safely read tab-separated UTF-16LE files
read_tsv_utf16 <- function(filename, year) {
  path <- paste0(base_path, filename)
  df <- read.delim(path, fileEncoding = "UTF-16LE", sep = "\t", check.names = TRUE)
  df$Year <- year
  df <- df[, !duplicated(names(df))]  # Remove any duplicated columns
  return(df)
}

# Read each year
data_2018 <- read_tsv_utf16("2018.csv", 2018)
data_2019 <- read_tsv_utf16("2019.csv", 2019)
data_2020 <- read_tsv_utf16("2020.csv", 2020)
data_2021 <- read_tsv_utf16("2021.csv", 2021)
data_2022 <- read_tsv_utf16("2022.csv", 2022)
data_2023 <- read_tsv_utf16("2023.csv", 2023)
```

midwest is an example dataset included in the tidyverse package

## 2.2 Provide a short summary of the dataset(s)

```{r}
head(dataset)
```

In this case we see 28 variables, but we miss some information on what units they are in. We also don't know anything about the year/moment in which this data has been captured.

``` r
inline_code = TRUE
```

These are things that are usually included in the metadata of the dataset. For your project, you need to provide us with the information from your metadata that we need to understand your dataset of choice.

## 2.3 Describe the type of variables included

Think of things like:

-   Do the variables contain health information or SES information?

-   Have they been measured by interviewing individuals or is the data coming from administrative sources?

*For the sake of this example, I will continue with the assignment...*

# Part 3 - Quantifying

## 3.1 Data cleaning

Say we want to include only larger distances (above 2) in our dataset, we can filter for this.

```{r data_cleaning}


```

Please use a separate 'R block' of code for each type of cleaning. So, e.g. one for missing values, a new one for removing unnecessary variables etc.

### Merging

```{r}
# Combine all datasets
all_data <- bind_rows(
  data_2018, data_2019, data_2020,
  data_2021, data_2022, data_2023
)

# Save the combined dataset
write.csv(all_data, "~/Documents/GitHub/PM2.5//All_Years_East_Combined.csv", row.names = FALSE)
```

## 3.2 Generate necessary variables

Variable 1

```{r gen_var1}

```

Variable 2

```{r gen_var2}

```

## 3.3 Visualize temporal variation

```{r}

```

## 3.4 Visualize spatial variation

```{r visualise_map}

```

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.5 Visualize sub-population variation

What is the poverty rate by state?

```{r visualise_subpopulations}
dataset$inmetro <- dataset$inmetro %>% as.factor()
# Boxplot of poverty rate by state using the 'midwest' dataset
ggplot(dataset, aes(x = inmetro, y = percadultpoverty)) +
  geom_boxplot() +
  labs(
    title = "Distribution of Poverty Rates by Metropolitan status (Midwest counties)",
    x = "Metropolitan Area",
    y = "Poverty Rate of Adults (%)"
  ) +
  theme_minimal() +
  theme(
    legend.position = "right"
  )
```

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.6 Event analysis

Analyze the relationship between two variables.

```{r analysis}

```

Here you provide a description of why the plot above is relevant to your specific social problem.

# Part 4 - Discussion

## 4.1 Discuss your findings

Our analysis reveals a clear regional divide in air quality and its impact on public health across Europe, specifically when comparing Eastern and Western Europe.

First, the spatial analysis shows that Eastern European countries consistently have higher average PM2.5 levels than Western European countries. Countries like Poland, Romania, Bulgaria, and Hungary showed the most concerning pollution levels. In contrast, France, Germany, and Ireland had much lower PM2.5 concentrations. This supports the hypothesis that air pollution is geographically uneven across Europe, and suggests that factors such as outdated industrial infrastructure, energy production methods, and less stringent environmental policies in the East contribute to this discrepancy.

Second, the temporal analysis from 2018 to 2022 shows a general decline in PM2.5 levels, reaching a low point in 2020. This dip likely correlates with the COVID-19 pandemic, during which lockdowns reduced transportation and industrial emissions. However, the rebound in 2021 indicates that these reductions were temporary, and that without long-term policy changes, improvements in air quality may not be sustained. This emphasizes the need for permanent structural interventions rather than relying on short-term events.

Third, the subgroup analysis highlights the public health consequences of this pollution. Eastern European countries not only have higher PM2.5 levels but also show significantly higher mortality rates related to air pollution. For instance, Bulgaria, Romania, and Poland exhibit more than 150 deaths per 100,000 people, whereas Western European countries like France, Belgium, and Austria report less than half that amount. This strongly suggests that higher pollution directly correlates with higher health risks, and it highlights the urgent need for targeted health and environmental policies in Eastern Europe.

In conclusion, our findings support the idea that PM2.5 pollution is both an environmental and a social issue, with unequal health outcomes across Europe. Tackling this problem requires coordinated policy efforts, especially in Eastern Europe, focusing on clean energy, industrial modernization, and public health investment. Without addressing these disparities, the health impacts of air pollution will continue to disproportionately affect populations in the East.

# Part 5 - Reproducibility

## 5.1 Github repository link

Provide the link to your PUBLIC repository here: ...

## 5.2 Reference list

World Health Organization. (2021). Air pollution: Health impacts. <https://www.who.int/health-topics/air-pollution#tab=tab_1>

\
